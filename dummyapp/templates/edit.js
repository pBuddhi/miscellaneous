if(!Date.prototype.toISOString){(function(){function a(c){var b=String(c);if(b.length===1){b="0"+b;}return b;}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z";};}());}(function(){var a=new Date("2011-06-02T09:34:29+02:00");if(!a||+a!==1307000069000){Date.fromISOString=function(e){var c,h,g=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,f=g.exec(e)||[];if(f[1]){c=f[1].split(/\D/);for(var d=0,b=c.length;d<b;d++){c[d]=parseInt(c[d],10)||0;}c[1]-=1;c=new Date(Date.UTC.apply(Date,c));if(!c.getDate()){return NaN;}if(f[5]){h=(parseInt(f[5],10)*60);if(f[6]){h+=parseInt(f[6],10);}if(f[4]=="+"){h*=-1;}if(h){c.setUTCMinutes(c.getUTCMinutes()+h);}}return c;}return NaN;};}else{Date.fromISOString=function(b){return new Date(b);};}})();function getDateStringFromDatePicker(b){var a=$(b).datepicker("getDate");if(a!==null){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();}else{return"";}}function getDateFromDateString(a){var b=a.split("-");return new Date(b[0],b[1]-1,b[2]);}function sortTaapSelectBox(a){if($(a).length!=0){$(a).each(function(){var b=$(this).val();$(this).html($("option",$(this)).sort(function(d,c){return d.text==c.text?0:d.text.toUpperCase().localeCompare(c.text.toUpperCase())<0?-1:1;}));$(this).val(b);});}}$.fn.pVal=function(){var a=$(this),b=a.eq(0).val();if(b==a.attr("placeholder")){return"";}else{return b;}};var g_nameValidatorRegex=/^[.,a-zA-Z' -]*$/;function getInvalidNameCharacters(b){var a="";for(var c=0;c<b.length;c++){if(!g_nameValidatorRegex.test(b[c])){a=a+b[c];}}return a;}function checkForSpecialCharactersInName(){hideSpclCharErrors();var a=true;$("#firstName").val($.trim($("#firstName").pVal()));$("#lastName").val($.trim($("#lastName").pVal()));if(!g_nameValidatorRegex.test($("#firstName").val())){$("#firstNameLabel").addClass("invalid");$("#errorInvalidCharactersFirstName #invalidFNChars").text(getInvalidNameCharacters($("#firstName").val()));$("#errorInvalidCharactersFirstName").show();a=false;}if(!g_nameValidatorRegex.test($("#lastName").val())){$("#lastNameLabel").addClass("invalid");$("#errorInvalidCharactersLastName #invalidLNChars").text(getInvalidNameCharacters($("#lastName").val()));$("#errorInvalidCharactersLastName").show();a=false;}return a;}function hideSpclCharErrors(){$("#errorInvalidCharactersFirstName").hide();$("#errorInvalidCharactersLastName").hide();}var g_postalCodeValidatorRegex=/^((\d{5}-\d{4})|(\d{5}))$/;function hidePostalCodeErrors(){$("#errorInvalidPostalCode").hide();}function checkForPostalCodeForUS(a){hidePostalCodeErrors();var b=true;if($("#agencyPostalCode").val().length==0){return b;}if(!g_postalCodeValidatorRegex.test($("#agencyPostalCode").val())){$("#"+a).addClass("invalid");$("#errorInvalidPostalCode").show();b=false;}return b;}function trimDataTableSearchFilter(){$("div.dataTables_filter").bind("paste",function(d){var a=$.trim(d.target.value);var f=$(this).attr("id");$("#"+f+" :input").val("").val(d.target.value);var c=f.replace("_filter","");var b=$("#"+c).dataTable();b.fnFilter(a);});}var taapAjaxModule=(function(){var a=[];return{ajax:function(b){var c=$.ajax(b);a.push(c);return c;},abortAll:function(){for(var b=0;b<a.length;b++){a[b].abort();}a=[];}};})();window.onbeforeunload=function(){taapAjaxModule.abortAll();};function getescaped(a){return $("<span/>").text(a).html();}function getnonescaped(a){return $("<span/>").html(a).text();}var timerForMessage=3000;if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}$(function(){populateGDS();cancelEditHeaderView();disableAddingNotes();disablePaymentNotes();cancelEditItinNameView();clearHotelInfo();disableAddingFees();enabletopbuttons();getTotalPrice();});function clearHotelInfo(){for(var b=1;b<=maximumAdditionalHotelInfoBoxes;b++){$("#header"+b+"-textbox").val("");$("#text"+b+"-textbox").val("");for(var a=1;a<=maximumBulletPerBox;a++){$("#bullet"+b+"-"+a+"-textbox").val("");}}}function populateGDS(){$("#amadeusCodeBox").val($("#amadeusCodeDiv").text());$("#amadeusCodeBox").attr("readonly","true");$("#galileoCodeBox").val($("#galileoCodeDiv").text());$("#galileoCodeBox").attr("readonly","true");if($("#galileoCodeBox").val()!=null&&($("#galileoCodeBox").val().length>galileoCharLimit)){$("#galileo-Error").show();}$("#sabreCodeBox").val($("#sabreCodeDiv").text());$("#sabreCodeBox").attr("readonly","true");}function sendEmail(b,a,c){if(!invalidateTextBox("sender-email-textbox")){$("#sender-email-textbox-Error").hide();$("#sender-email-textbox-Empty").show();}else{if(!invalidateTextBox("travellers-email-textbox")){$("#travellers-email-textbox-Error").hide();$("#travellers-email-textbox-Empty").show();}else{$("#sender-email-textbox-Empty").hide();$("#travellers-email-textbox-Empty").hide();if(getInvalidEmailAddresses()==""){allClearSendEmail(b,a,c);}}}}function allClearSendEmail(h,d,i){var c="";var e=$("#email-subject-textbox").pVal().trim();if(d!=""){var b="&tripNumber="+d;}else{var b="";}if(i!=""){var a="&itineraryNumber="+i;}else{var a="";}var g=getCompleteAddress();var f=getHiddenDivs();hideemailaddressinputbox();hideemaildiv();hideNonPrintContent();$("#sendingpleasewaitmessage").show();$.ajax({type:"POST",url:"/taap/itinerarybuilder/email?tripId="+h+b+a,data:"addressesstr="+encodeURIComponent(c)+"&subject="+encodeURIComponent(e)+"&message="+encodeURIComponent(getescaped($("#travel-agent-notes-display").text()))+getCompleteAddress()+"&itinName="+encodeURIComponent(getescaped($("#itinName").text()))+"&paymentInfo="+encodeURIComponent(getescaped($("#payment-notes").text()))+getAdditionalInfo()+getAdditionalFeeDetails()+updateHiddenDivs(),async:true,success:function(j){if(j.indexOf("success")!=-1){showNonPrintContent();$("#sendingpleasewaitmessage").hide();$("#emailupdatemessage").show().delay(timerForMessage).fadeOut();}else{showNonPrintContent();$("#sendingpleasewaitmessage").hide();$("#onPageModalLink").click();}}});}function getInvalidEmailAddresses(){var a="";a=a.concat(validateEmail("sender-email-textbox"));a=a.concat(validateEmail("travellers-email-textbox"));a=a.concat(validateEmails("cc-email-textbox"));return a;}function validateEmail(b){var a="";var c=$("#"+b).pVal();if(c.charAt(c.length-1)==";"){c=c.substring(0,c.length-1);}if(!isEmailValid(c.trim())){a=c.trim()+" ";$("#"+b+"-Label").addClass("invalid");$("#"+b+"-invalid").text(c);$("#"+b+"-Error").show();}else{$("#"+b+"-Error").hide();$("#"+b+"-Label").removeClass("invalid");}return a;}function validateEmails(d){var a=true;var c="";var e=$("#"+d).pVal();if(e.trim()==""){$("#"+d+"-Label").removeClass("invalid");$("#"+d+"-Error").hide();$("#"+d+"-Error2").hide();return c;}if(e.charAt(e.length-1)==";"){e=e.substring(0,e.length-1);}var f=[];f=e.split(";");if(f.length>8){$("#"+d+"-Label").addClass("invalid");$("#"+d+"-Error").hide();$("#"+d+"-Error2").show();}else{$("#"+d+"-Error2").hide();for(var b=0;b<f.length;b++){if(!isEmailValid(f[b].trim())){a=false;c=c+f[b].trim()+" ";}}if(!a){$("#"+d+"-Label").addClass("invalid");$("#"+d+"-invalid").text(c);$("#"+d+"-Error").show();}else{$("#"+d+"-Label").removeClass("invalid");$("#"+d+"-Error").hide();}return c;}}function getCompleteAddress(){return"&agencyName="+encodeURIComponent(getescaped($("#agency-name").text()))+"&address="+encodeURIComponent(getescaped($("#agency-address").text()))+"&address2="+encodeURIComponent(getescaped($("#agency-address-Line2").text()))+"&contacts="+encodeURIComponent(getescaped($("#agency-contacts").text()))+"&website="+encodeURIComponent(getescaped($("#agency-website").text()));}function getAdditionalFeeDetails(){var b="";var a=parseFloat($("#agentFeeDiv").text().replace(",","."));if(a!=0){b=b.concat("&agentFeeTitle="+encodeURIComponent(getescaped($("#feeTitle").text()))+"&agentFee="+encodeURIComponent(a));}return b;
}function getAdditionalInfo(){var b="";var f="";var a=1;if($(".hotelTable").length!=0&&$(".flightTable").length==0){b="hotel";}else{if($(".flightTable").length!=0&&$(".hotelTable").length==0){b="flight";}else{return f;}}for(var e=1;e<=maximumAdditionalHotelInfoBoxes;e++){if($("#"+b+"-header"+e+"-textbox").pVal()==""){break;}if(!$("#"+b+"-additional-info"+e).hasClass("hiddenDiv")){f=f+"&header"+a+"="+encodeURIComponent(getescaped($("#"+b+"-header"+e).text()));f=f+"&text"+a+"="+encodeURIComponent(getescaped($("#"+b+"-text"+e).text()));var d=1;for(var c=1;c<=maximumBulletPerBox;c++){if($("#"+b+"-bullet"+e+"-"+c).text()!=""){f=f+"&bullet"+a+"-"+d+"="+encodeURIComponent(getescaped($("#"+b+"-bullet"+e+"-"+c).text()));d++;}}a++;}}return f;}function disabletopbuttons(){$("#previewBtn").attr("disabled","true");$("#exportBtn").attr("disabled","true");$("#printBtn").attr("disabled","true");$("#emailBtn").attr("disabled","true");$("#send-button").attr("disabled","true");$(".export-menu-btn > button").attr("disabled","true");}function enabletopbuttons(){$("#previewBtn").removeAttr("disabled");$("#exportBtn").removeAttr("disabled");$("#printBtn").removeAttr("disabled");$("#emailBtn").removeAttr("disabled");$(".export-menu-btn > button").removeAttr("disabled");}function checkandenabletopbuttons(){if(numeditboxesvisible()==0){enabletopbuttons();}else{if(numeditboxesvisible()==1){$("#send-button").removeAttr("disabled");}}}function numeditboxesvisible(){var b=0;for(var a=0;a<$(".edit-buttons").length;a++){if($($(".edit-buttons").get(a)).is(":visible")){b++;}}return b;}function updateHiddenDivs(){var a="";var c=getHiddenDivs();for(var b=0;b<c.length;b++){a=a.concat("&hidden="+c[b]);}return a;}function removeHiddenDivs(){$("#reservationConfirmedMsgRow .hiddenDiv").parentsUntil("tr").hide();$(".itinPart .hiddenDiv").parentsUntil("tr").hide();}function addHiddenDivs(){$("#reservationConfirmedMsgRow .hiddenDiv").parentsUntil("tr").show();$(".itinPart .hiddenDiv").parentsUntil("tr").show();}function hideNonPrintContent(){$("#nav-TaapNavHeader").hide();$("#pagetitle").hide();$("#nav-TaapNavFooter").hide();$("#buttons").hide();cancelEditHeaderView();$("#editHeaderBtn").hide();$("#linebelowaddress").show();disableAddingNotes();$("#travel-agent-notes-edit").hide();cancelEditItinNameView();$("#editItninNameBtn").hide();removeHiddenDivs();$(".nonPrintContent").hide();for(var a=0;a<$(".dashed-box").length;a++){$($(".dashed-box").get(a)).addClass("dashed-box-hidden");}for(var a=0;a<$(".dashed-box-hidden").length;a++){$($(".dashed-box-hidden").get(a)).removeClass("dashed-box");}$("#feeTitle").addClass("l-margin6");$("#agentFee").addClass("r-margin6");if(parseFloat($("#agentFeeDiv").text())==0){$("#feeLine").hide();}else{$("#feeLine").show();}}function showNonPrintContent(){$("#nav-TaapNavHeader").show();$("#pagetitle").show();$("#nav-TaapNavFooter").show();$("#buttons").show();$("#editHeaderBtn").show();$("#linebelowaddress").hide();if(isBlank($("#travel-agent-notes-display").text())){}$("#travel-agent-notes-edit").show();$("#editItninNameBtn").show();addHiddenDivs();$(".nonPrintContent").show();for(var a=0;a<$(".dashed-box-hidden").length;a++){$($(".dashed-box-hidden").get(a)).addClass("dashed-box");}for(var a=0;a<$(".dashed-box").length;a++){$($(".dashed-box").get(a)).removeClass("dashed-box-hidden");}disableAddingNotes();$("#feeTitle").removeClass("l-margin6");$("#agentFee").removeClass("r-margin6");$("#feeLine").show();if($.trim($("#payment-notes").text())==""){$("#paymentNotesBtn").show();$("#editPaymentNotes").hide();}else{$("#editPaymentNotes").show();$("#paymentNotesBtn").hide();}$("#applyCancelAddPaymentNotes").hide();}function showemailaddressinputbox(){disablePreviewMode();disabletopbuttons();$("#send-button").removeAttr("disabled");$("#travellers-email-addresses").show();$("#email-view-buttons").show();moveCursorTo("travellers-email-textbox");}function hideemailaddressinputbox(){$("#sender-name-textbox-charError").hide();$("#email-subject-textbox-charError").hide();$("#travellers-email-addresses").hide();$("#email-view-buttons").hide();checkandenabletopbuttons();}function showemaildiv(){disablePreviewMode();disabletopbuttons();$("#send-button").removeAttr("disabled");$("#sendEmailToAgentRow").show();}function hideemaildiv(){$("#sendEmailToAgentRow").hide();checkandenabletopbuttons();}function printItinerary(){disablePreviewMode();hideNonPrintContent();disableHyperLinkStyle();window.print();enableHyperLinkStyle();showNonPrintContent();}function enablePreviewMode(){$("#preview-mode").show();hideNonPrintContent();disableHyperLinkStyle();}function disablePreviewMode(){$("#preview-mode").hide();showNonPrintContent();enableHyperLinkStyle();}function populateAgencyHeader(){$("#agency-name").html(getescaped($("#agencyName").pVal()));$("#agency-address").html(getescaped($("#address").pVal()));$("#agency-address-Line2").html(getescaped($("#address-ln2").pVal()));$("#agency-contacts").html(getescaped($("#phoneNumber").pVal()));$("#agency-website").html(getescaped($("#websiteUrl").pVal()));}function showEditHeaderView(){disabletopbuttons();$("#agency-header").hide();$("#editHeaderBtn").hide();$("#agency-address-edit").show();$("#editHeader").show();moveCursorTo("agencyName");}function hideEditHeaderView(){if($(".headerError:visible").length!=0){return;}$("#agencyName").val($("#agencyName").pVal().trim());$("#address").val($("#address").pVal().trim());$("#address-ln2").val($("#address-ln2").pVal().trim());$("#phoneNumber").val($("#phoneNumber").pVal().trim());$("#websiteUrl").val($("#websiteUrl").pVal().trim());populateAgencyHeader();$("#agency-address-edit").hide();$("#editHeader").hide();$("#agency-header").show();$("#editHeaderBtn").show();checkandenabletopbuttons();}function cancelEditHeaderView(){$("#agencyName-charError").hide();$("#address-charError").hide();$("#address-ln2-charError").hide();$("#phoneNumber-charError").hide();$("#websiteUrl-charError").hide();$("#agencyName").val($("#agency-name").text());$("#address").val($("#agency-address").text());$("#address-ln2").val($("#agency-address-Line2").text());$("#phoneNumber").val($("#agency-contacts").text());$("#websiteUrl").val($("#agency-website").text());hideEditHeaderView();}function enableAddingNotes(){disabletopbuttons();$("#travel-agent-notes-placeholderRow").hide();$("#travel-agent-notesRow").show();$("#editNotes").hide();$("#applyCancelAddNotes").show();$("#travel-agent-notes-edit").show();$("#travel-agent-notes-display").hide();moveCursorTo("agent-notes-textbox");}function disableAddingNotes(){$("#agent-notes-textbox-charError").hide();$("#agent-notes-textbox").val($("#travel-agent-notes-display").text());$("#applyCancelAddNotes").hide();if($("#agent-notes-textbox").pVal().trim()!=""){$("#editNotes").show();$("#travel-agent-notes-display").show();$("#travel-agent-notes-edit").hide();}else{$("#travel-agent-notes-placeholderRow").show();$("#travel-agent-notesRow").hide();}checkandenabletopbuttons();}function saveAddedNotes(){$("#agent-notes-textbox").val($("#agent-notes-textbox").pVal().trim());$("#applyCancelAddNotes").hide();$("#travel-agent-notes-display").html(getescaped($("#agent-notes-textbox").pVal()));if($("#agent-notes-textbox").pVal()!=""){$("#editNotes").show();$("#travel-agent-notes-display").show();$("#travel-agent-notes-edit").hide();}else{$("#travel-agent-notes-placeholderRow").show();$("#travel-agent-notesRow").hide();}checkandenabletopbuttons();}function enableAddingPaymentNotes(){disabletopbuttons();$("#payment-notes-placeholderRow").hide();$("#paymentNotesBtn").hide();$("#payment-notesRow").show();$("#applyCancelAddPaymentNotes").show();$("#editPaymentNotes").hide();$("#payment-notes-edit").show();$("#payment-notesDiv").hide();$("#paymentNotesApplyCancelButtons").show();moveCursorTo("payment-notes-textbox");}function savePaymentNotes(){$("#payment-notes-textbox").val($("#payment-notes-textbox").pVal().trim());$("#payment-notes").html(getescaped($("#payment-notes-textbox").pVal()));if($.trim($("#payment-notes").text())==""){$("#payment-notes-placeholderRow").show();
$("#paymentNotesBtn").show();$("#payment-notesRow").hide();}else{$("#editPaymentNotes").show();$("#payment-notes-edit").hide();$("#payment-notesDiv").show();}$("#applyCancelAddPaymentNotes").hide();checkandenabletopbuttons();}function disablePaymentNotes(){$("#payment-notes-textbox-charError").hide();$("#payment-notes-textbox").val($("#payment-notes").text());if($.trim($("#payment-notes").text())==""){$("#payment-notes-placeholderRow").show();$("#paymentNotesBtn").show();$("#payment-notesRow").hide();}else{$("#applyCancelAddPaymentNotes").hide();$("#editPaymentNotes").show();$("#payment-notes-edit").hide();$("#payment-notesDiv").show();}$("#paymentNotesApplyCancelButtons").hide();checkandenabletopbuttons();}function addline(a,c,b){$("#"+a+"-anotherline"+c+"-"+(b-1)).hide();$("#"+a+"-line"+c+"-"+b).show();moveCursorTo(a+"-bullet"+c+"-"+b+"-textbox");}function enableAddingAdditionalInfo(a,b){disabletopbuttons();$("#"+a+"-additional-info"+b+"Row").show();$("#"+a+"-additional-info"+b+"-edit").show();$("#"+a+"-additional-info"+b).hide();$("#"+a+"-additional-info"+b+"Hide").hide();$("#"+a+"-applyCancelAddAdditionalInfo"+b).show();$("#"+a+"-additional-infoRow"+(b-1)).hide();$("#"+a+"-addAnotherBtn"+(b-1)+"Div").hide();if($("#"+a+"-additional-info"+(b+1)+"Row").is(":hidden")){$("#"+a+"-addAnotherBtn"+b+"Div").show();$("#"+a+"-additional-infoRow"+b).hide();}moveCursorTo(a+"-header"+b+"-textbox");}function saveAddedAdditionalInfo(a,c){$("#"+a+"-noHeaderError"+c).hide();$("#"+a+"-header"+c+"-textbox-Label").removeClass("invalid");$("#"+a+"-header"+c+"-textbox").val($("#"+a+"-header"+c+"-textbox").pVal().trim());$("#"+a+"-text"+c+"-textbox").val($("#"+a+"-text"+c+"-textbox").pVal().trim());$("#"+a+"-header"+c).html(getescaped($("#"+a+"-header"+c+"-textbox").pVal()));$("#"+a+"-text"+c).html(getescaped($("#"+a+"-text"+c+"-textbox").pVal()));for(var b=1;b<=maximumBulletPerBox;b++){$("#"+a+"-bullet"+c+"-"+b+"-textbox").val($("#"+a+"-bullet"+c+"-"+b+"-textbox").pVal().trim());$("#"+a+"-bullet"+c+"-"+b).html(getescaped($("#"+a+"-bullet"+c+"-"+b+"-textbox").pVal()));if($("#"+a+"-bullet"+c+"-"+b+"-textbox").pVal()!=""){$("#"+a+"-bullet"+c+"-"+b).show();}else{$("#"+a+"-bullet"+c+"-"+b).hide();}}hideEditAdditionalInfoView(a,c);}function disableAddingAdditionalInfo(a,c){$("#"+a+"-noHeaderError"+c).hide();$("#"+a+"-header"+c+"-textbox-Label").removeClass("invalid");$("#"+a+"-header"+c+"-textbox-charError").hide();$("#"+a+"-text"+c+"-textbox-charError").hide();$("#"+a+"-header"+c+"-textbox").val($("#"+a+"-header"+c).text());$("#"+a+"-text"+c+"-textbox").val($("#"+a+"-text"+c).text());for(var b=1;b<=maximumBulletPerBox;b++){$("#"+a+"-bullet"+c+"-"+b+"-textbox-charError").hide();$("#"+a+"-bullet"+c+"-"+b+"-textbox").val($("#"+a+"-bullet"+c+"-"+b).text());}hideEditAdditionalInfoView(a,c);}function hideEditAdditionalInfoView(a,b){if(allEditFieldsEmpty(a,b)){b=moveToEnd(a,b);}if($("#"+a+"-additional-info"+(b+1)+"Row").is(":visible")){$("#"+a+"-additional-info"+b+"-edit").hide();$("#"+a+"-additional-info"+b).show();$("#"+a+"-additional-info"+b+"Hide").show();$("#"+a+"-applyCancelAddAdditionalInfo"+b).hide();}else{$(".additionalInfoPlaceholder").hide();$("#"+a+"-addAnotherBtn"+b+"Div").hide();if(allEditFieldsEmpty(a,b)){$("#"+a+"-additional-info"+b+"Row").hide();if($("#"+a+"-additional-info"+(b-1)+"-edit").is(":visible")){$("#"+a+"-addAnotherBtn"+(b-1)+"Div").show();}else{$("#"+a+"-additional-infoRow"+(b-1)).show();}}else{$("#"+a+"-additional-info"+b+"-edit").hide();$("#"+a+"-additional-info"+b).show();$("#"+a+"-additional-info"+b+"Hide").show();$("#"+a+"-applyCancelAddAdditionalInfo"+b).hide();$("#"+a+"-additional-infoRow"+b).show();}}checkandenabletopbuttons();}function addAdditionalLine(a,c,b){$("#"+a+"-anotherline"+c+"-"+(b-1)).hide();$("#"+a+"-line"+c+"-"+b).show();moveCursorTo(a+"-bullet"+c+"-"+b+"-textbox");}function allEditFieldsEmpty(a,c){if($("#"+a+"-header"+c).text()!=""){return false;}if($("#"+a+"-text"+c).text()!=""){return false;}for(var b=1;b<=maximumBulletPerBox;b++){if($("#"+a+"-bullet"+c+"-"+b).text()!=""){return false;}}return true;}function moveToEnd(a,c){while($("#"+a+"-additional-info"+(c+1)+"Row").is(":visible")){$("#"+a+"-header"+c+"-textbox").val($("#"+a+"-header"+(c+1)+"-textbox").pVal());$("#"+a+"-header"+c).text($("#"+a+"-header"+(c+1)).text());$("#"+a+"-text"+c+"-textbox").val($("#"+a+"-text"+(c+1)+"-textbox").pVal());$("#"+a+"-text"+c).text($("#"+a+"-text"+(c+1)).text());for(var b=1;b<=maximumBulletPerBox;b++){$("#"+a+"-bullet"+c+"-"+b+"-textbox").val($("#"+a+"-bullet"+(c+1)+"-"+b+"-textbox").pVal());if($("#"+a+"-line"+(c+1)+"-"+b).css("display")=="none"){$("#"+a+"-anotherline"+c+"-"+(b-1)).show();$("#"+a+"-line"+c+"-"+b).hide();}else{$("#"+a+"-anotherline"+c+"-"+(b-1)).hide();$("#"+a+"-line"+c+"-"+b).show();}$("#"+a+"-bullet"+c+"-"+b).text($("#"+a+"-bullet"+(c+1)+"-"+b).text());if($("#"+a+"-bullet"+(c+1)+"-"+b).is(":visible")){$("#"+a+"-bullet"+c+"-"+b).show();}else{$("#"+a+"-bullet"+c+"-"+b).hide();}}if($("#"+a+"-additional-info"+(c+1)).is(":visible")){$("#"+a+"-additional-info"+c+"-edit").hide();$("#"+a+"-additional-info"+c).show();$("#"+a+"-additional-info"+c+"Hide").show();$("#"+a+"-applyCancelAddAdditionalInfo"+c).hide();}else{$("#"+a+"-additional-info"+c+"-edit").show();$("#"+a+"-additional-info"+c).hide();$("#"+a+"-additional-info"+c+"Hide").hide();$("#"+a+"-applyCancelAddAdditionalInfo"+c).show();}c++;}$("#"+a+"-header"+c+"-textbox").val("");$("#"+a+"-header"+c).text("");$("#"+a+"-text"+c+"-textbox").val("");$("#"+a+"-text"+c).text("");for(var b=1;b<=maximumBulletPerBox;b++){$("#"+a+"-bullet"+c+"-"+b+"-textbox").val("");$("#"+a+"-bullet"+c+"-"+b).text("");if(b>1){$("#"+a+"-anotherline"+c+"-"+(b-1)).show();$("#"+a+"-line"+c+"-"+b).hide();}}return c;}function enableAddingFees(){disabletopbuttons();$("#feeLine").hide();$("#feeLine-edit").show();$("#agentFee-edit").show();$("#agentFee").hide();$("#applyCancelAddFees").show();$("#addFeesBtn").hide();$("#editFees").hide();$("#feeTitle-edit").show();$("#feeTitle").hide();moveCursorTo("feeTitle-textbox");}function disableAddingFees(){if(differentDecimalFormat($("#agentFeeDiv").text())){var a=parseFloat($("#agentFeeDiv").text().replace(",","."));$("#agent-fee-textbox").val(a.toFixed(decimalPlacesInPrice).replace(".",","));}else{var a=parseFloat($("#agentFeeDiv").text());$("#agent-fee-textbox").val(a.toFixed(decimalPlacesInPrice));}$("#agentFee-Label").removeClass("invalid");$("#invalidNumberError").hide();$("#feeTitle-textbox-charError").hide();$("#feeTitle-textbox").val($("#feeTitle").text());$("#feeTitle-edit").hide();$("#feeTitle").show();$("#applyCancelAddFees").hide();$("#agentFee-edit").hide();$("#agentFee").show();$("#feeLine-edit").hide();$("#feeLine").show();if(a!=0){$("#addFeesBtn").hide();$("#editFees").show();}else{$("#addFeesBtn").show();$("#editFees").hide();}checkandenabletopbuttons();}function saveAddedFees(){if(differentDecimalFormat($("#agentFeeDiv").text())){var a=$("#agent-fee-textbox").val().replace(".",";");a=a.replace(",",".");}else{var a=$("#agent-fee-textbox").val();}var b=parseFloat(a);if(isNaN(b)||!isFinite(a)){$("#agentFee-Label").addClass("invalid");$("#invalidNumberError").show();return;}$("#agentFee-Label").removeClass("invalid");$("#invalidNumberError").hide();if(differentDecimalFormat($("#agentFeeDiv").text())){$("#agentFeeDiv").text(b.toFixed(decimalPlacesInPrice).replace(".",","));$("#agent-fee-textbox").val(b.toFixed(decimalPlacesInPrice).replace(".",","));}else{$("#agentFeeDiv").text(b.toFixed(decimalPlacesInPrice));$("#agent-fee-textbox").val(b.toFixed(decimalPlacesInPrice));}$("#feeTitle-textbox").val($("#feeTitle-textbox").pVal().trim());if($("#feeTitle-textbox").pVal()!=""){$("#feeTitle").html(getescaped($("#feeTitle-textbox").pVal()));}else{$("#feeTitle-textbox").val($("#feeTitle").text());}$("#feeTitle-edit").hide();$("#feeTitle").show();$("#applyCancelAddFees").hide();$("#agentFee-edit").hide();$("#agentFee").show();$("#feeLine-edit").hide();$("#feeLine").show();
if(b.toFixed(decimalPlacesInPrice)!=0){$("#addFeesBtn").hide();$("#editFees").show();$("#agentFee").removeClass("mediumgrey");$("#feeTitle").removeClass("mediumgrey");}else{$("#addFeesBtn").show();$("#editFees").hide();$("#agentFee").addClass("mediumgrey");$("#feeTitle").addClass("mediumgrey");}if(b!=b.toFixed(decimalPlacesInPrice)){$("#numberroundoffwarning-fee").show().delay(timerForMessage).fadeOut();}checkandenabletopbuttons();}function getTotalPrice(){var d=parseFloat($("#tripNetPriceDiv").text().replace(",","."));var b=parseFloat($("#taxesAndFeesDiv").text().replace(",","."));var a=parseFloat($("#agentFeeDiv").text().replace(",","."));var c=d+b+a;$("#totalPrice").text(c.toFixed(decimalPlacesInPrice));if(differentDecimalFormat($("#tripNetPriceDiv").text())){$("#totalPrice").text($("#totalPrice").text().replace(".",","));}}function hidePriceDiv(a){hideDiv(a);disableAddingFees();disablePaymentNotes();$("#priceSection").addClass("nonPrintContent");}function showPriceDiv(a){showDiv(a);$("#priceSection").removeClass("nonPrintContent");}function showEditItinNameView(){disabletopbuttons();$("#editItinNameView").show();$("#itinNameView").hide();moveCursorTo("itin-name-textbox");}function hideEditItinNameView(){$("#itin-name-textbox-charError").hide();$("#itin-name-textbox").val($("#itin-name-textbox").pVal().trim());if($("#itin-name-textbox").pVal()==""){$("#itin-name-textbox").val($("#itinName").text());$("#itin-name-textbox-emptyError").show().delay(timerForMessage).fadeOut();}else{$("#itinName").html(getescaped($("#itin-name-textbox").pVal()));$("#editItinNameView").hide();$("#itinNameView").show();checkandenabletopbuttons();}}function cancelEditItinNameView(){$("#itin-name-textbox").val($("#itinName").text());hideEditItinNameView();}function showGDS(){disabletopbuttons();$("#gdslink").hide();$("#gdsCommandBoxes").show();}function hideGDS(){$("#gdslink").show();$("#gdsCommandBoxes").hide();checkandenabletopbuttons();}function hideDiv(a){$("#"+a).addClass("lightgrey");$("#"+a).addClass("hiddenDiv");$("#"+a+"Hide").hide();$("#"+a+"Show").show();TaapItinExportUtils.excludeForExport($("#"+a));}function showDiv(a){$("#"+a).removeClass("lightgrey");$("#"+a).removeClass("hiddenDiv");$("#"+a+"Hide").show();$("#"+a+"Show").hide();TaapItinExportUtils.includeForExport($("#"+a));}function getHiddenDivs(){var b=[];for(var a=0;a<$("#reservationConfirmedMsgRow .hiddenDiv").length;a++){b.push($("#reservationConfirmedMsgRow .hiddenDiv")[a].id);}for(var a=0;a<$(".itinPart .hiddenDiv").length;a++){b.push($(".itinPart .hiddenDiv")[a].id);}return b;}function invalidateTextBox(a){if(!$("#"+a+"Div").is(":hidden")&&$("#"+a).pVal()==""){$("#"+a+"-Label").addClass("invalid");return false;}else{$("#"+a+"Label").removeClass("invalid");}return true;}function isEmailValid(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a);}function isBlank(a){return(!a||/^\s*$/.test(a));}function differentDecimalFormat(a){return(a.indexOf(",")!=-1);}function checkCharLimitOnKeyPress(b,a,c){if($("#"+b).pVal().length>=a&&isCharacterKeyPress(c)){$("#"+b).val($("#"+b).pVal().substring(0,a));$("#"+b+"-charError").show();}else{$("#"+b+"-charError").hide();}}function checkCharLimitOnPaste(b,a,c){if(c.length>=a){$("#"+b).val($("#"+b).pVal().substring(0,a));$("#"+b+"-charError").show();}else{$("#"+b+"-charError").hide();}}function isCharacterKeyPress(a){if(typeof a.which=="undefined"){return true;}else{if(typeof a.which=="number"&&a.which>0){return !a.ctrlKey&&!a.metaKey&&!a.altKey&&a.which!=8;}}return false;}function moveCursorTo(b){var c=$("#"+b);var a=$("#"+b).val().length;c[0].focus();if(c[0].setSelectionRange){c[0].setSelectionRange(a,a);}else{if(c[0].createTextRange){c[0]=c[0].createTextRange();c[0].collapse(true);c[0].moveEnd("character",a);c[0].moveStart("character",a);c[0].select();}}}function disableHyperLinkStyle(){$("a").each(function(){$(this).addClass("inherit-text-style");});}function enableHyperLinkStyle(){$("a").each(function(){$(this).removeClass("inherit-text-style");});}
/*!  generated on 2016-06-14 22:56:38.714 PDT(-0700) in 7 ms  */

/*!  served in 2 ms  */
